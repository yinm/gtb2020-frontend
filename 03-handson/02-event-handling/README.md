# 掲示板に投稿できるようにしてみよう

(1)

今回はdataオプションとして、2つ(説明用は無視する)の状態を保持しています。投稿したコメントを保持する`comments`、投稿者の名前を保持する`name`です。掲示板アプリっぽさが出てきましたね！(「投稿内容がない」と思う方もいるかもしれませんが、そちらはハンズオンの方で開発してもらいます)

この説明内で作る、掲示板アプリの処理の全体像は、こちらです。
1. 投稿者の名前を、投稿者自身が入力する (その内容を、`name`に保持する)
1. 投稿するボタンを押すと投稿ができる (その内容を、`comments`に保持する)
1. これまで投稿された内容(=`comments`)をリスト表示する

(2)

まず、投稿者の名前を、投稿者自身が入力できるようにしたいと思います。これまで学んだことで、`{{ data名 }}`を使えば、Vue.jsの保持している状態を、HTMLに紐付けて表示できることは知っています(紐付けの方向としては、Vue.js -> HTML)。しかし、今回の投稿者が入力できるという場合だと、HTMLのinput要素で入力した内容をVue.jsに保持してもらうという、逆方向の紐付けが必要になります(紐付けの方向としては、HTML -> Vue.js)。これを実現するための機構もVue.jsは用意してくれていて、`v-model="data名"`をinput要素の属性として記述すれば使えます。`v-model="data名"`は、ユーザーが入力した内容を使って、Vue.jsで処理したいときによく使われる機構なので覚えておくとよいでしょう。

(3) - <small>おまけ程度に見て下さい(今回の掲示板アプリを作る上では知らないでも大丈夫なので)</small>

(2)の説明だと、`v-model`はHTML -> Vue.jsの紐付けしかしないように思ったかもしれませんが、実際はVue.js -> HTMLの紐付け(`{{ data名 }}`と同じ)もできます。(3)のコードは、dataオプションで設定した初期値をHTMLに表示している例になります。

(4)

ここまでで、投稿者の名前の入力と保持ができるようになりました。次は、投稿するボタンを押すと投稿ができるに取り掛かります。やりたいことをプログラミングで実現できそうな言い回しに変えると、こんな感じでしょうか。

- 投稿するボタンを押したタイミングで、任意の処理を実行する
- 実行したい処理として、投稿する処理を用意する

1つずつ解決していきましょう。

まずは、「投稿するボタンを押したタイミングで、任意の処理を実行する」です。Vue.jsでは「ユーザーがクリックの操作をしたときに、任意の処理を実行する」ことを実現するための機構として、`@click="関数"`が用意されています。今回はこれを使います。

`@click="関数"`についての説明

ブラウザでは、ユーザーの何らかの操作などを[`イベント`](https://developer.mozilla.org/ja/docs/Web/Events)として扱っており、イベントを感知することができます。また、イベントを感知したときに実行する処理を開発者が登録できる、[addEventListener()](https://developer.mozilla.org/ja/docs/Web/API/EventTarget/addEventListener)をブラウザは提供しています(ちなみに、イベントを感知したときに実行する処理のことを、EventListenerと言います。メソッド名がそのままでわかりやすいですね)。この`addEventListener`をVue.jsで扱いやすいようにしたものが、`@イベント名="関数"`の記述です。掲示板アプリでは、clickイベントを扱いたいので、`@click="関数"`となるわけです。

(5)

次が、「実行したい処理として、投稿する処理を用意する」です。Vue.jsでは、インスタンス生成時のオプションの[`methods`](https://jp.vuejs.org/v2/api/#methods)内に定義した関数を、Vue.js内やHTMLの特定の場所(e.g. `@click="関数"`の関数)で実行することができます。掲示板アプリだと、`createComment`という関数を用意して、投稿するボタンでclickイベントが発生したときに実行するようにしています。

処理内容の説明

`data`の値にアクセスするために、`this`を使っています(e.g. `this.comments`)。基本的に、Vue.jsのインスタンス内で他の値にアクセスしたいときは`this`がいると思ってもらっていいです。HTMLでVue.jsの`data`や`methods`を使うときも`this`を使っても動作します。ただ、省略できるので実装時には省略してシンプルに書くことがほとんどでしょう。

[`push()`は配列に要素を格納するためのメソッド](https://jp.vuejs.org/v2/guide/list.html#%E5%A4%89%E6%9B%B4%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89)です。


(6)

これまで投稿しコメント一覧(`comments`)を使って、コメントを表示している部分です。[v-for](https://jp.vuejs.org/v2/guide/list.html)というのはVue.jsの機能で、配列内の要素を順番に取り出して表示できます。ここでは、`comments`から取り出した時の名前を`comment`として扱っています。

---

ハンズオンおつかれさまです。ここまででフロントエンドの世界だけで完結する掲示板アプリは完成です🎉

しかし、現状の掲示板アプリだと以下のことができません。

- データの永続化ができない
- 他のユーザーと情報を共有できない

**データの永続化ができない**

画面をリロードしてみましょう。なんと、入力内容が全て消えてしまいます...！入力した内容を残しておくということが今のままではできません。

**他のユーザーと情報を共有できない**

自分のブラウザなら自分が投稿した内容が見えてると思うのですが、他の人が投稿した内容は見えないですよね。他の人と同じ内容を共有するということも今のままではできません。

これらの問題を解決するために、ここからはWeb APIを使って掲示板アプリを開発していきます。